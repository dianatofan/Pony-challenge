(this["webpackJsonppony-challenge"]=this["webpackJsonppony-challenge"]||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(5),r=a.n(c),s=a(3),i=(a(16),a(17),a(1)),o=function(e){var t=e.id,a=e.name,c=e.min,r=e.max,s=e.value,o=e.onChange;return Object(n.useEffect)((function(){s&&function(){var e=document.getElementById(t),a=(e.value-e.min)/(e.max-e.min)*100;e.style.background="linear-gradient(to right, #eeddf1 0%,  #eeddf1 ".concat(a/2,"%, #eeddf1 ").concat(a,"%,  #35023b ").concat(a,"%,  #35023b 100%)")}()}),[s]),Object(i.jsxs)("div",{className:"slider",children:[Object(i.jsx)("label",{htmlFor:t,children:a}),Object(i.jsx)("input",{type:"range",className:"slider__input",id:t,name:a,min:c,max:r,defaultValue:s,onChange:function(e){return o(e.target.value)}}),Object(i.jsx)("label",{children:s})]})},u=(a(19),function(e){var t=e.cell,a=e.width,n=t.walls,c=t.isPony,r=t.isDomokun,s=t.isExit;return Object(i.jsxs)("div",{className:"cell ".concat(n.join(" ")),style:{width:"".concat(70/a,"vmin"),height:"".concat(70/a,"vmin")},children:[c&&Object(i.jsx)("span",{className:"pony"}),r&&Object(i.jsx)("span",{className:"domokun"}),s&&Object(i.jsx)("span",{className:"door"})]})}),l=function(e){var t=e.row,a=e.width;return t.map((function(e,t){return Object(i.jsx)(u,{cell:e,width:a},t)}))},p=function(e){var t=e.data,a=function(e){for(var t=0,a=Object(s.a)(e.size,2),n=a[0],c=a[1],r=[],i=0;i<c;i++){for(var o=[],u=0;u<n;u++){var l={key:t,walls:e.data[t],isPony:t===e.pony[0],isDomokun:t===e.domokun[0],isExit:t===e["end-point"][0]};i===c-1&&l.walls.push("south"),u===n-1&&l.walls.push("east"),o.push(l),t++}r.push(o)}return r}(t);return Object(i.jsx)("div",{className:"maze",onKeyPress:function(e){return console.log(e)},children:a.map((function(e,a){return Object(i.jsx)("div",{className:"row",children:Object(i.jsx)(l,{row:e,width:t.size[0]},a)},a)}))})},d={keyboard:a.p+"static/media/keyboard.0b2ea240.svg",up:a.p+"static/media/up.5854c251.svg",down:a.p+"static/media/down.18785dbf.svg",left:a.p+"static/media/left.c9706021.svg",right:a.p+"static/media/right.e24ccab8.svg"},j=a(6),m=a(4),h=a.n(m),b=a(8),f="https://ponychallenge.trustpilot.com/pony-challenge/maze",O=a(7),y=a(2),_="SET_GAME_OVER",g="SET_GAME_WON",x="RESET_GAME",v={isGameWon:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(y.a)(Object(y.a)({},e),{},{isGameWon:!1});case g:return Object(y.a)(Object(y.a)({},e),{},{isGameWon:!0});case x:return Object(y.a)(Object(y.a)({},e),{},{isGameWon:null});default:return e}},E="CREATE_MAZE_REQUEST",k="CREATE_MAZE_SUCCESS",N="CREATE_MAZE_FAILURE",S="GET_MAZE_REQUEST",C="GET_MAZE_SUCCESS",z="GET_MAZE_FAILURE",A="MAKE_MOVE_REQUEST",T="MAKE_MOVE_SUCCESS",M="MAKE_MOVE_FAILURE",G="RESET_MAZE",L={mazeId:null,mazeContent:null,isLoading:!1,error:null},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!0});case k:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1,mazeId:t.data});case N:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1,mazeId:null,error:t.data});case S:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!0});case C:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1,mazeContent:t.data});case z:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1,mazeContent:null,error:t.data});case A:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!0});case T:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1});case M:return Object(y.a)(Object(y.a)({},e),{},{isLoading:!1,error:t.data});case G:return L;default:return e}},I=Object(O.a)({app:w,maze:R}),U=Object(O.b)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),P=function(e){return{type:k,data:e}},W=function(e){return{type:N,data:e}},D=function(e){return{type:C,data:e}},V=function(e){return{type:z,data:e}},Z=function(e){return{type:T,data:e}},F=function(e){return{type:M,data:e}},J=function(){return{type:G}},K=function(){var e=Object(b.a)(h.a.mark((function e(t){var a,n,c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.width,n=t.height,c=t.difficulty,e.prev=1,U.dispatch({type:E,data:void 0}),e.next=5,fetch("".concat(f),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({"maze-width":parseInt(a),"maze-height":parseInt(n),"maze-player-name":"Twilight Sparkle",difficulty:parseInt(c)})});case 5:return r=e.sent,e.next=8,r.json();case 8:s=e.sent,U.dispatch(P(s.maze_id)),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),U.dispatch(W(e.t0)),e.abrupt("return",new Error(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U.dispatch({type:S,data:void 0}),e.next=4,fetch("".concat(f,"/").concat(t)).then((function(e){return e.json()})).then((function(e){U.dispatch(D(e))}));case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),U.dispatch(V(e.t0)),e.abrupt("return",new Error(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(h.a.mark((function e(t,a){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U.dispatch({type:A,data:a}),e.next=4,fetch("".concat(f,"/").concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({direction:a})});case 4:return n=e.sent,e.next=7,n.json();case 7:if("active"!==(c=e.sent).state){e.next=14;break}return e.next=11,X(t);case 11:U.dispatch(Z(a)),e.next=16;break;case 14:U.dispatch(J()),"won"===c.state?U.dispatch({type:g}):U.dispatch({type:_});case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(0),U.dispatch(F(e.t0)),e.abrupt("return",new Error(e.t0));case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t,a){return e.apply(this,arguments)}}(),B=function(e,t){Object(n.useEffect)((function(){if(U.getState().maze.mazeContent){var a=function(a){a.key===e&&t()};return window.addEventListener("keyup",a),function(){return window.removeEventListener("keyup",a)}}}),[t,e])},q=a.p+"static/media/gameOver.d8daa31f.gif",H=a.p+"static/media/gameWon.a4cc3037.gif",Y=Object(j.b)((function(e){return{mazeId:e.maze.mazeId,maze:e.maze.mazeContent,isGameWon:e.app.isGameWon}}),(function(e){return{resetMaze:function(){return e(J())},resetGame:function(){return e({type:x})}}}))((function(e){var t=Object(n.useState)(15),a=Object(s.a)(t,2),c=a[0],r=a[1],u=Object(n.useState)(15),l=Object(s.a)(u,2),j=l[0],m=l[1],h=Object(n.useState)(5),b=Object(s.a)(h,2),f=b[0],O=b[1],y=Object(n.useState)("manual-play"),_=Object(s.a)(y,2),g=_[0],x=_[1],v=e.mazeId,w=e.maze,E=e.resetMaze,k=e.resetGame,N=e.isGameWon;return Object(n.useEffect)((function(){return v&&X(v)}),[v]),B("ArrowLeft",(function(){Q(v,"west")})),B("ArrowRight",(function(){Q(v,"east")})),B("ArrowUp",(function(){Q(v,"north")})),B("ArrowDown",(function(){Q(v,"south")})),Object(i.jsxs)("div",{className:"app",children:[Object(i.jsxs)("aside",{className:"app__sidebar",children:[Object(i.jsx)("h1",{className:"app__title",children:"Save the pony \ud83e\udd84 "}),Object(i.jsx)("p",{className:"app__description",children:"Twilight Sparkle is in danger. Rescue her from the big bad Domokun!"}),Object(i.jsxs)("section",{className:"app__parameters",children:[Object(i.jsx)(o,{id:"width",name:"width",min:"15",max:"25",value:c,onChange:r}),Object(i.jsx)(o,{id:"height",name:"height",min:"15",max:"25",value:j,onChange:m}),Object(i.jsx)(o,{id:"difficulty",name:"difficulty",min:"0",max:"10",value:f,onChange:O})]}),Object(i.jsx)("section",{className:"app__buttons",children:Object(i.jsx)("button",{className:"app__buttons--play",onClick:v?function(){E(),k()}:function(){return K({width:c,height:j,difficulty:f})},children:v?"Reset \u2192":"Play \u21a9\ufe0e"})}),Object(i.jsxs)("form",{className:"app__mode",children:[Object(i.jsx)("input",{type:"radio",value:"manual-play",checked:"manual-play"===g,id:"manual-play",onChange:function(e){return!v&&x(e.target.value)},name:"manual-play"}),Object(i.jsx)("label",{htmlFor:"manual-play",children:"Manual play"}),Object(i.jsx)("input",{type:"radio",value:"autoplay",checked:"autoplay"===g,id:"autoplay",onChange:function(e){return!v&&x(e.target.value)},name:"autoplay"}),Object(i.jsx)("label",{htmlFor:"autoplay",children:"Autoplay"})]}),v&&Object(i.jsx)("section",{className:"app__controls",children:Object(i.jsxs)("p",{className:"app__keyboard-controls",children:["Use"," ",Object(i.jsx)("img",{src:d.keyboard,className:"app__keyboard-controls-icon",width:30,height:30,alt:"arrow keys"})," ","to move the pony."]})})]}),Object(i.jsx)("div",{className:"app__maze-container",children:v?w&&Object(i.jsxs)("div",{children:[Object(i.jsx)(p,{data:w,width:c,height:j}),Object(i.jsxs)("p",{className:"app__mouse-controls",children:[Object(i.jsx)("img",{src:d.up,onClick:function(){return Q(v,"north")},className:"app__mouse-controls-up",alt:"arrow keys"})," ",Object(i.jsx)("img",{src:d.down,onClick:function(){return Q(v,"south")},className:"app__mouse-controls-down",alt:"arrow keys"})," ",Object(i.jsx)("img",{src:d.left,onClick:function(){return Q(v,"west")},className:"app__mouse-controls-left",alt:"arrow keys"})," ",Object(i.jsx)("img",{src:d.right,onClick:function(){return Q(v,"east")},className:"app__mouse-controls-right",alt:"arrow keys"})," "]})]}):null===N?Object(i.jsx)("p",{className:"app__instructions",children:"Press on 'Play' to create the maze."}):N?Object(i.jsxs)("div",{className:"app__game-won",children:[Object(i.jsx)("img",{src:H,width:400,className:"app__gif",alt:"Game won"}),Object(i.jsx)("p",{children:"Congrats, you saved the pony!"}),Object(i.jsx)("button",{className:"app__buttons--retry",onClick:function(){return K({width:c,height:j,difficulty:f})},children:"Play again"})]}):Object(i.jsxs)("div",{className:"app__game-over",children:[Object(i.jsx)("img",{src:q,className:"app__gif",alt:"Game over"}),Object(i.jsx)("p",{children:"Game over"}),Object(i.jsx)("button",{className:"app__buttons--retry",onClick:function(){return K({width:c,height:j,difficulty:f})},children:"Retry"})]})})]})}));r.a.render(Object(i.jsx)(j.a,{store:U,children:Object(i.jsx)(Y,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.9aa90ae4.chunk.js.map